{"version":3,"file":"index.mjs","sources":["../src/parseSelect2OptionName.js","../src/index.js"],"sourcesContent":["export const parseSelect2OptionName = item => {\n  const option = item.slice(7);\n  return option.charAt(0).toLowerCase() + option.slice(1);\n};\n","import { Controller } from \"@hotwired/stimulus\";\nimport $ from \"jquery\";\nimport { parseSelect2OptionName } from \"./parseSelect2OptionName\";\n\nexport default class extends Controller {\n  get jQuery() {\n    if (this._jQuery) return this._jQuery;\n\n    const globalJQuery =\n      typeof window !== \"undefined\" ? window.jQuery || window.$ : undefined;\n    const resolved = $.fn ? $ : globalJQuery;\n\n    if (!resolved || !resolved.fn) {\n      throw new Error(\n        \"stimulus-select2 requires jQuery. Make sure it is loaded before the controller connects.\"\n      );\n    }\n\n    this._jQuery = resolved;\n    return this._jQuery;\n  }\n\n  get select() {\n    return this.jQuery(this.element);\n  }\n\n  get options() {\n    const data = this.select.data();\n    const options = {};\n\n    for (const item in data) {\n      if (Object.prototype.hasOwnProperty.call(data, item) && item.indexOf(\"select2\") > -1) {\n        options[parseSelect2OptionName(item)] = data[item];\n      }\n    }\n\n    return options;\n  }\n\n  connect() {\n    this.ensureSelect2();\n    this.select.select2(this.options);\n  }\n\n  disconnect() {\n    if (this.hasSelect2Instance()) {\n      this.select.select2(\"destroy\");\n    }\n  }\n\n  ensureSelect2() {\n    if (typeof this.jQuery.fn.select2 !== \"function\") {\n      throw new Error(\n        \"Select2 was not found on the current jQuery instance. Import select2 before this controller connects.\"\n      );\n    }\n  }\n\n  hasSelect2Instance() {\n    return !!this.select.data(\"select2\");\n  }\n}\n"],"names":["parseSelect2OptionName","item","option","slice","charAt","toLowerCase","Controller","jQuery","_jQuery","globalJQuery","window","$","undefined","resolved","fn","Error","select","element","options","data","Object","prototype","hasOwnProperty","call","indexOf","connect","ensureSelect2","select2","disconnect","hasSelect2Instance"],"mappings":";;;AAAO,MAAMA,sBAAsB,GAAGC,IAAI,IAAI;AAC5C,EAAA,MAAMC,MAAM,GAAGD,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC;AAC5B,EAAA,OAAOD,MAAM,CAACE,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,GAAGH,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;AACzD,CAAC;;ACCc,WAAA,SAAcG,UAAU,CAAC;EACtC,IAAIC,MAAMA,GAAG;AACX,IAAA,IAAI,IAAI,CAACC,OAAO,EAAE,OAAO,IAAI,CAACA,OAAO;AAErC,IAAA,MAAMC,YAAY,GAChB,OAAOC,MAAM,KAAK,WAAW,GAAGA,MAAM,CAACH,MAAM,IAAIG,MAAM,CAACC,CAAC,GAAGC,SAAS;IACvE,MAAMC,QAAQ,GAAGF,CAAC,CAACG,EAAE,GAAGH,CAAC,GAAGF,YAAY;AAExC,IAAA,IAAI,CAACI,QAAQ,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;AAC7B,MAAA,MAAM,IAAIC,KAAK,CACb,0FACF,CAAC;AACH,IAAA;IAEA,IAAI,CAACP,OAAO,GAAGK,QAAQ;IACvB,OAAO,IAAI,CAACL,OAAO;AACrB,EAAA;EAEA,IAAIQ,MAAMA,GAAG;AACX,IAAA,OAAO,IAAI,CAACT,MAAM,CAAC,IAAI,CAACU,OAAO,CAAC;AAClC,EAAA;EAEA,IAAIC,OAAOA,GAAG;IACZ,MAAMC,IAAI,GAAG,IAAI,CAACH,MAAM,CAACG,IAAI,EAAE;IAC/B,MAAMD,OAAO,GAAG,EAAE;AAElB,IAAA,KAAK,MAAMjB,IAAI,IAAIkB,IAAI,EAAE;MACvB,IAAIC,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACJ,IAAI,EAAElB,IAAI,CAAC,IAAIA,IAAI,CAACuB,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE;QACpFN,OAAO,CAAClB,sBAAsB,CAACC,IAAI,CAAC,CAAC,GAAGkB,IAAI,CAAClB,IAAI,CAAC;AACpD,MAAA;AACF,IAAA;AAEA,IAAA,OAAOiB,OAAO;AAChB,EAAA;AAEAO,EAAAA,OAAOA,GAAG;IACR,IAAI,CAACC,aAAa,EAAE;IACpB,IAAI,CAACV,MAAM,CAACW,OAAO,CAAC,IAAI,CAACT,OAAO,CAAC;AACnC,EAAA;AAEAU,EAAAA,UAAUA,GAAG;AACX,IAAA,IAAI,IAAI,CAACC,kBAAkB,EAAE,EAAE;AAC7B,MAAA,IAAI,CAACb,MAAM,CAACW,OAAO,CAAC,SAAS,CAAC;AAChC,IAAA;AACF,EAAA;AAEAD,EAAAA,aAAaA,GAAG;IACd,IAAI,OAAO,IAAI,CAACnB,MAAM,CAACO,EAAE,CAACa,OAAO,KAAK,UAAU,EAAE;AAChD,MAAA,MAAM,IAAIZ,KAAK,CACb,uGACF,CAAC;AACH,IAAA;AACF,EAAA;AAEAc,EAAAA,kBAAkBA,GAAG;IACnB,OAAO,CAAC,CAAC,IAAI,CAACb,MAAM,CAACG,IAAI,CAAC,SAAS,CAAC;AACtC,EAAA;AACF;;;;"}