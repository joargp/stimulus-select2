{"version":3,"file":"index.umd.js","sources":["../src/parseSelect2OptionName.js","../src/index.js"],"sourcesContent":["export const parseSelect2OptionName = item => {\n  const option = item.slice(7);\n  return option.charAt(0).toLowerCase() + option.slice(1);\n};\n","import { Controller } from \"@hotwired/stimulus\";\nimport $ from \"jquery\";\nimport { parseSelect2OptionName } from \"./parseSelect2OptionName\";\n\nexport default class extends Controller {\n  get jQuery() {\n    if (this._jQuery) return this._jQuery;\n\n    const globalJQuery =\n      typeof window !== \"undefined\" ? window.jQuery || window.$ : undefined;\n    const resolved = $.fn ? $ : globalJQuery;\n\n    if (!resolved || !resolved.fn) {\n      throw new Error(\n        \"stimulus-select2 requires jQuery. Make sure it is loaded before the controller connects.\"\n      );\n    }\n\n    this._jQuery = resolved;\n    return this._jQuery;\n  }\n\n  get select() {\n    return this.jQuery(this.element);\n  }\n\n  get options() {\n    const data = this.select.data();\n    const options = {};\n\n    for (const item in data) {\n      if (Object.prototype.hasOwnProperty.call(data, item) && item.indexOf(\"select2\") > -1) {\n        options[parseSelect2OptionName(item)] = data[item];\n      }\n    }\n\n    return options;\n  }\n\n  connect() {\n    this.ensureSelect2();\n    this.select.select2(this.options);\n  }\n\n  disconnect() {\n    if (this.hasSelect2Instance()) {\n      this.select.select2(\"destroy\");\n    }\n  }\n\n  ensureSelect2() {\n    if (typeof this.jQuery.fn.select2 !== \"function\") {\n      throw new Error(\n        \"Select2 was not found on the current jQuery instance. Import select2 before this controller connects.\"\n      );\n    }\n  }\n\n  hasSelect2Instance() {\n    return !!this.select.data(\"select2\");\n  }\n}\n"],"names":["parseSelect2OptionName","item","option","slice","charAt","toLowerCase","Controller","jQuery","_jQuery","globalJQuery","window","$","undefined","resolved","fn","Error","select","element","options","data","Object","prototype","hasOwnProperty","call","indexOf","connect","ensureSelect2","select2","disconnect","hasSelect2Instance"],"mappings":";;;;;;EAAO,MAAMA,sBAAsB,GAAGC,IAAI,IAAI;EAC5C,EAAA,MAAMC,MAAM,GAAGD,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC;EAC5B,EAAA,OAAOD,MAAM,CAACE,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,EAAE,GAAGH,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;EACzD,CAAC;;ECCc,WAAA,SAAcG,mBAAU,CAAC;IACtC,IAAIC,MAAMA,GAAG;EACX,IAAA,IAAI,IAAI,CAACC,OAAO,EAAE,OAAO,IAAI,CAACA,OAAO;EAErC,IAAA,MAAMC,YAAY,GAChB,OAAOC,MAAM,KAAK,WAAW,GAAGA,MAAM,CAACH,MAAM,IAAIG,MAAM,CAACC,CAAC,GAAGC,SAAS;MACvE,MAAMC,QAAQ,GAAGF,CAAC,CAACG,EAAE,GAAGH,CAAC,GAAGF,YAAY;EAExC,IAAA,IAAI,CAACI,QAAQ,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;EAC7B,MAAA,MAAM,IAAIC,KAAK,CACb,0FACF,CAAC;EACH,IAAA;MAEA,IAAI,CAACP,OAAO,GAAGK,QAAQ;MACvB,OAAO,IAAI,CAACL,OAAO;EACrB,EAAA;IAEA,IAAIQ,MAAMA,GAAG;EACX,IAAA,OAAO,IAAI,CAACT,MAAM,CAAC,IAAI,CAACU,OAAO,CAAC;EAClC,EAAA;IAEA,IAAIC,OAAOA,GAAG;MACZ,MAAMC,IAAI,GAAG,IAAI,CAACH,MAAM,CAACG,IAAI,EAAE;MAC/B,MAAMD,OAAO,GAAG,EAAE;EAElB,IAAA,KAAK,MAAMjB,IAAI,IAAIkB,IAAI,EAAE;QACvB,IAAIC,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACJ,IAAI,EAAElB,IAAI,CAAC,IAAIA,IAAI,CAACuB,OAAO,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE;UACpFN,OAAO,CAAClB,sBAAsB,CAACC,IAAI,CAAC,CAAC,GAAGkB,IAAI,CAAClB,IAAI,CAAC;EACpD,MAAA;EACF,IAAA;EAEA,IAAA,OAAOiB,OAAO;EAChB,EAAA;EAEAO,EAAAA,OAAOA,GAAG;MACR,IAAI,CAACC,aAAa,EAAE;MACpB,IAAI,CAACV,MAAM,CAACW,OAAO,CAAC,IAAI,CAACT,OAAO,CAAC;EACnC,EAAA;EAEAU,EAAAA,UAAUA,GAAG;EACX,IAAA,IAAI,IAAI,CAACC,kBAAkB,EAAE,EAAE;EAC7B,MAAA,IAAI,CAACb,MAAM,CAACW,OAAO,CAAC,SAAS,CAAC;EAChC,IAAA;EACF,EAAA;EAEAD,EAAAA,aAAaA,GAAG;MACd,IAAI,OAAO,IAAI,CAACnB,MAAM,CAACO,EAAE,CAACa,OAAO,KAAK,UAAU,EAAE;EAChD,MAAA,MAAM,IAAIZ,KAAK,CACb,uGACF,CAAC;EACH,IAAA;EACF,EAAA;EAEAc,EAAAA,kBAAkBA,GAAG;MACnB,OAAO,CAAC,CAAC,IAAI,CAACb,MAAM,CAACG,IAAI,CAAC,SAAS,CAAC;EACtC,EAAA;EACF;;;;;;;;"}